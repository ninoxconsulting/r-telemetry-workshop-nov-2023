{
  "hash": "2c6686754f3b32d4a05460c6445532d1",
  "result": {
    "markdown": "---\ntitle: \"Downloading telemetry data from Movebank\"\nexecute: \n  eval: false\n---\n\n\n## Overview\n\nIn this module we will introduce the move2 r package and demonstrate how you can download telemetry data directly from the movebank web repository via an API.\n\n\n## Background\n\n[Movebank](https://www.movebank.org/cms/movebank-main) is a free, online database of animal movement data hosted by the Max Planck Institute for Ornithology. Data owners can manage their data and have the option to share it with colleagues or the public. If the public or a registered user has permission to see a study, the study can be downloaded as a .csv file and imported directly into R using the [move2 package](https://cran.r-project.org/web/packages/move2/index.html)\n\nNote move2 this is an updated version of the [move package](https://cran.r-project.org/web/packages/move/vignettes/move.html)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#install.packages(\"move2\")\nlibrary(\"move2\")\n\nlibrary(dplyr, quietly = TRUE)\n```\n:::\n\n\n1.  You will need to create a log in on the movebank platform to be able to download and view data. This can be done at [Movebank](https://www.movebank.org/cms/movebank-main).\n\n2.  Set up your credentials within the move2 package. To access any data through R you will also need to supply the credentials you used to create your movebank account to the move2 package. This package uses the keyring package to safely store your credentials. You only need to run the following code once, after which the credentials will be remembered for following R sessions.\n\n**NOTE** : make sure to keep your credential safe, and do not committ these to a common code platform such as github.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmovebank_store_credentials(\"myUserName\", \"myPassword\")\n\n\n#movebank_store_credentials(\"gcperkins\", \"*****\")\n\n# to delete your credentials run this line\n#movebank_remove_credentials()\n\n# you can check by running this \nkeyring::key_list()\n```\n:::\n\n\n# 3. Access and download data\n\nDepending on the license type determined by the data custodian, different methods are needed to access the data. For data created under [creative common 0 license](https://creativecommons.org/public-domain/cc0/), there are no restrictions on use.\n\nWe can use the **movebank_retrieve** function to review data that is stored under a CC_0 or creative common \"no rights reserved\" license.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmdata <- movebank_retrieve(entity_type = \"study\", license_type = \"CC_0\") %>%\n  dplyr::select(id, name, number_of_deployed_locations) %>%\n  filter(!is.na(number_of_deployed_locations)) \n```\n:::\n\n\nWe can get a full list of data sets available for download. We can use the id number to extract data directly from the movebank repository through the move2 API link.\n\nLets look at the **Peregrine Falcon, High Arctic Institute, northwest Greenland..** study, where the id = 7249090.\n\nThis gives us an overview of the study information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbird_info <- movebank_download_study_info(study_id = 7249090)\n```\n:::\n\n\nLets download the actual data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbird_data <- movebank_download_study(7249090, attributes = NULL)\n```\n:::\n\n\nWow that is lots of text!\n\nLets have a look at the details. Movebank is set up to ensure you read the fine print, i.e. accept the terms and conditions on each study that you download. To do this, we have two options:\n\n-   1: we can access the data for the particular study via the website. This only needs to be done once.\n-   2: we add the license key to our request.\n\nNOte once we have done this once we wont need to repeat this process again.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbird_data <- movebank_download_study(7249090, attributes = NULL,\n'license-md5'='2f2ef1252f957dce32a3f0f7a52c62ed')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(bird_data)\n```\n:::\n\n\nIf we are only interested in the deployment information we can also download this seperately\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbird_deply <- movebank_download_deployment(7249090)\n```\n:::\n\n\n## Extra challenge!\n\nIf you are interested in viewing the entire Caribou data set you can find it on movebank (study_id = 216040785)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# download the study info details\nbou <- movebank_download_study_info(study_id = 216040785)\n\n# download the data \nbou_data <- movebank_download_study(216040785, attributes = NULL)\n\n# download deployment data \nbou_ref_data <- movebank_download_deployment(216040785)\n```\n:::\n\n\nReferences: \n\n- [Movebank](https://www.movebank.org/cms/movebank-main). \n\n- [move2 r package vignette - \"Downloading data from movebank\"](https://cran.r-project.org/web/packages/move2/vignettes/movebank.html)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}